{
 ;; Lightweight "live" profile for smoke/integration checks.
 ;; Keep `meta` as shared small runtime and run `voice` on small Bielik runtime.

 :ferment.model.defaults/profile "mini"
 :ferment.model.defaults/runtime {:enabled? false
                                  :inherit-io? false
                                  :http {:enabled? false}}

 :ferment.model.id/solver {:profile "mini"
                           :id/default "mlx-community/Phi-4-mini-instruct-4bit"
                           :id/mini "mlx-community/Phi-4-mini-instruct-4bit"
                           :id/fallback "mlx-community/Phi-4-mini-instruct-4bit"}
 :ferment.model.id/voice {:profile "mini"
                          :id/default "speakleash/Bielik-1.5B-v3.0-Instruct-MLX-8bit"
                          :id/mini "speakleash/Bielik-1.5B-v3.0-Instruct-MLX-8bit"
                          :id/fallback "speakleash/Bielik-1.5B-v3.0-Instruct-MLX-8bit"}
 :ferment.model.id/coding {:profile "mini"
                           :id/default "mlx-community/Phi-4-mini-instruct-4bit"
                           :id/mini "mlx-community/Phi-4-mini-instruct-4bit"
                           :id/fallback "mlx-community/Phi-4-mini-instruct-4bit"}
 :ferment.model.id/meta {:profile "mini"
                         :id/default "mlx-community/Phi-4-mini-instruct-4bit"
                         :id/mini "mlx-community/Phi-4-mini-instruct-4bit"
                         :id/fallback "mlx-community/Phi-4-mini-instruct-4bit"}

 ;; Keep meta shared; voice runs separately; solver/coding stay disabled.
 :ferment.model.runtime/solver {:enabled? false
                                :http {:enabled? false}}
 :ferment.model.runtime/voice {:enabled? true
                               :inherit-io? false
                               :command [#ref :ferment.env/ferment.model.server.bin
                                         "--host" #ref :ferment.env/ferment.model.voice.server.host
                                         "--port" #ref :ferment.env/ferment.model.voice.server.port
                                         "--model" #ref :ferment.model.id/voice]
                               :invoke/http {:base-url #ref :ferment.env/ferment.model.voice.base.url
                                             :endpoint #ref :ferment.env/ferment.model.voice.endpoint
                                             :temperature 0.0
                                             :max-tokens 220
                                             :model    #ref :ferment.model.id/voice}
                               :http {:enabled? false}}
 :ferment.model.runtime/coding {:enabled? false
                                :http {:enabled? false}}
 :ferment.model.runtime/meta {:enabled? true
                              :inherit-io? false
                              :command [#ref :ferment.env/ferment.model.server.bin
                                        "--host" #ref :ferment.env/ferment.model.meta.server.host
                                        "--port" #ref :ferment.env/ferment.model.meta.server.port
                                        "--model" #ref :ferment.model.id/meta]
                              :invoke/http {:base-url #ref :ferment.env/ferment.model.meta.base.url
                                            :endpoint #ref :ferment.env/ferment.model.meta.endpoint
                                            :temperature 0.0
                                            :max-tokens 256
                                            :model    #ref :ferment.model.id/meta}
                              :http {:enabled? false}}

 ;; Keep solver/coding/meta on shared meta runtime; voice on Bielik runtime.
 :ferment.model/solver {:id #ref :ferment.model.id/solver
                        :runtime #ref :ferment.model.runtime/meta}
 :ferment.model/voice {:id #ref :ferment.model.id/voice
                       :runtime #ref :ferment.model.runtime/voice}
 :ferment.model/coding {:id #ref :ferment.model.id/coding
                        :runtime #ref :ferment.model.runtime/meta}
 :ferment.model/meta {:id #ref :ferment.model.id/meta
                      :runtime #ref :ferment.model.runtime/meta}
}
